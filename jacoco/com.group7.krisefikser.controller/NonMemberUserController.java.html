<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>NonMemberUserController.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">krisefikser</a> &gt; <a href="index.source.html" class="el_package">com.group7.krisefikser.controller</a> &gt; <span class="el_source">NonMemberUserController.java</span></div><h1>NonMemberUserController.java</h1><pre class="source lang-java linenums">package com.group7.krisefikser.controller;

import com.group7.krisefikser.dto.request.AddNonUserMemberRequest;
import com.group7.krisefikser.dto.request.DeleteNonUserMemberRequest;
import com.group7.krisefikser.dto.request.UpdateNonUserMemberRequest;
import com.group7.krisefikser.service.NonUserMemberService;
import com.group7.krisefikser.utils.ValidationUtils;
import io.swagger.v3.oas.annotations.Operation;
import io.swagger.v3.oas.annotations.media.Content;
import io.swagger.v3.oas.annotations.media.Schema;
import io.swagger.v3.oas.annotations.responses.ApiResponse;
import io.swagger.v3.oas.annotations.tags.Tag;
import jakarta.validation.Valid;
import java.util.logging.Logger;
import lombok.RequiredArgsConstructor;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.DeleteMapping;
import org.springframework.web.bind.annotation.PostMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;

/**
 * Controller for managing non-user members in a household.
 * This class provides endpoints for adding, updating, and deleting non-user members.
 */
@Controller
@RequestMapping(&quot;/api/non-user-member&quot;)
@Tag(name = &quot;Non-User Member&quot;, description = &quot;Non-user member management&quot;)
@RequiredArgsConstructor
public class NonMemberUserController {

  private final NonUserMemberService nonUserMemberService;

<span class="fc" id="L36">  private static final Logger logger = Logger.getLogger(NonUserMemberService.class.getName());</span>


  /**
   * Adds a non-user member to a household.
   *
   * @param request the request object containing the details of the non-user member to be added
   * @return a response entity indicating the success or failure of the operation
   */
  @Operation(
      summary = &quot;Add Non-User Member&quot;,
      description = &quot;Adds a non-user member to the household.&quot;,
        requestBody = @io.swagger.v3.oas.annotations.parameters.RequestBody(
            description = &quot;AddNonUserMemberRequest with non-user member details&quot;,
            required = true,
            content = @Content(
                mediaType = &quot;application/json&quot;,
                schema = @Schema(
                    implementation = AddNonUserMemberRequest.class
                )
            )
      ),
      responses = {
          @ApiResponse(
              responseCode = &quot;200&quot;,
              description = &quot;Non-user member added successfully&quot;,
              content = @Content(
                  mediaType = &quot;application/json&quot;,
                  schema = @Schema(
                      implementation = String.class
                  )
              )
          ),
          @io.swagger.v3.oas.annotations.responses.ApiResponse(
              responseCode = &quot;500&quot;,
              description = &quot;Error adding non-user member&quot;
          )
      }
  )
  @PostMapping(&quot;/add&quot;)
  public ResponseEntity&lt;?&gt; addNonUserMember(
      @Valid @RequestBody AddNonUserMemberRequest request, BindingResult bindingResult) {
<span class="fc" id="L78">    logger.info(&quot;Adding non-user member&quot;);</span>

<span class="pc bpc" id="L80" title="1 of 2 branches missed.">    if (bindingResult.hasErrors()) {</span>
<span class="nc" id="L81">      return ValidationUtils.handleValidationErrors(bindingResult);</span>
    }

    try {
<span class="fc" id="L85">      nonUserMemberService.addNonUserMember(request);</span>
<span class="fc" id="L86">      return ResponseEntity.ok(&quot;Non-user member added successfully&quot;);</span>
<span class="fc" id="L87">    } catch (Exception e) {</span>
<span class="fc" id="L88">      logger.severe(&quot;Error adding non-user member: &quot; + e.getMessage());</span>
<span class="fc" id="L89">      return ResponseEntity.status(500).body(&quot;Error adding non-user member&quot;);</span>
    }
  }

  /**
   * Updates an existing non-user member in a household.
   *
   * @param request the request object containing the updated details of the non-user member
   * @return a response entity indicating the success or failure of the operation
   */
  @Operation(
      summary = &quot;Update Non-User Member&quot;,
      description = &quot;Updates an existing non-user member in the household.&quot;,
      requestBody = @io.swagger.v3.oas.annotations.parameters.RequestBody(
          description = &quot;UpdateNonUserMemberRequest with updated non-user member details&quot;,
          required = true,
          content = @Content(
              mediaType = &quot;application/json&quot;,
              schema = @Schema(
                  implementation = UpdateNonUserMemberRequest.class
              )
          )
      ),
      responses = {
          @ApiResponse(
              responseCode = &quot;200&quot;,
              description = &quot;Non-user member updated successfully&quot;,
              content = @Content(
                  mediaType = &quot;application/json&quot;,
                  schema = @Schema(
                      implementation = String.class
                  )
              )
          ),
          @io.swagger.v3.oas.annotations.responses.ApiResponse(
              responseCode = &quot;500&quot;,
              description = &quot;Error updating non-user member&quot;
          )
      }
  )
  @PostMapping(&quot;/update&quot;)
  public ResponseEntity&lt;?&gt; updateNonUserMember(
      @Valid @RequestBody UpdateNonUserMemberRequest request, BindingResult bindingResult) {
<span class="fc" id="L132">    logger.info(&quot;Updating non-user member&quot;);</span>

<span class="pc bpc" id="L134" title="1 of 2 branches missed.">    if (bindingResult.hasErrors()) {</span>
<span class="nc" id="L135">      return ValidationUtils.handleValidationErrors(bindingResult);</span>
    }
    try {
<span class="fc" id="L138">      nonUserMemberService.updateNonUserMember(request);</span>
<span class="fc" id="L139">      return ResponseEntity.ok(&quot;Non-user member updated successfully&quot;);</span>
<span class="fc" id="L140">    } catch (Exception e) {</span>
<span class="fc" id="L141">      logger.severe(&quot;Error updating non-user member: &quot; + e.getMessage());</span>
<span class="fc" id="L142">      return ResponseEntity.status(500).body(&quot;Error updating non-user member&quot;);</span>
    }
  }

  /**
   * Deletes a non-user member from a household.
   *
   * @param request the request object containing the ID of the non-user member to be deleted
   * @return a response entity indicating the success or failure of the operation
   */
  @Operation(
      summary = &quot;Delete Non-User Member&quot;,
      description = &quot;Deletes a non-user member from the household.&quot;,
      requestBody = @io.swagger.v3.oas.annotations.parameters.RequestBody(
          description = &quot;DeleteNonUserMemberRequest with non-user member ID&quot;,
          required = true,
          content = @Content(
              mediaType = &quot;application/json&quot;,
              schema = @Schema(
                  implementation = DeleteNonUserMemberRequest.class
              )
          )
      ),
      responses = {
          @ApiResponse(
              responseCode = &quot;200&quot;,
              description = &quot;Non-user member deleted successfully&quot;,
              content = @Content(
                  mediaType = &quot;application/json&quot;,
                  schema = @Schema(
                      implementation = String.class
                  )
              )
          ),
          @io.swagger.v3.oas.annotations.responses.ApiResponse(
              responseCode = &quot;500&quot;,
              description = &quot;Error deleting non-user member&quot;
          )
      }
  )
  @DeleteMapping(&quot;/delete&quot;)
  public ResponseEntity&lt;?&gt; deleteNonUserMember(
      @Valid @RequestBody DeleteNonUserMemberRequest request, BindingResult bindingResult) {
<span class="fc" id="L185">    logger.info(&quot;Deleting non-user member&quot;);</span>

<span class="pc bpc" id="L187" title="1 of 2 branches missed.">    if (bindingResult.hasErrors()) {</span>
<span class="nc" id="L188">      return ValidationUtils.handleValidationErrors(bindingResult);</span>
    }
    try {
<span class="fc" id="L191">      nonUserMemberService.deleteNonUserMember(request);</span>
<span class="fc" id="L192">      return ResponseEntity.ok(&quot;Non-user member deleted successfully&quot;);</span>
<span class="fc" id="L193">    } catch (Exception e) {</span>
<span class="fc" id="L194">      logger.severe(&quot;Error deleting non-user member: &quot; + e.getMessage());</span>
<span class="fc" id="L195">      return ResponseEntity.status(500).body(&quot;Error deleting non-user member&quot;);</span>
    }
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>